<?php
    $_product = $this->getProduct();
    $_helper = $this->helper('catalog/output');
?>
<div class="widget magnify">
		<img class="imgPreview" alt="<?php echo $this->htmlEscape($this->getImageLabel()); ?>" 
			 data-zoom-image="<?php echo $this->helper('catalog/image')->init($_product, 'image');?>" 
			 src="<?php echo $this->helper('catalog/image')->init($_product, 'image')->resize(384);?>" 
			 title="<?php echo $this->htmlEscape($this->getImageLabel()); ?>" />
</div>


<div class="product-gallary" id="product-gallary">

	<a href="#" data-image="<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->resize(56);?>" 
           data-zoom-image="<?php echo $this->helper('catalog/image')->init($_product, 'image');?>">
        	<img alt="" src="<?php echo $this->helper('catalog/image')->init($_product, 'thumbnail')->resize(56);?>" />
    </a>
	<?php if (count($this->getGalleryImages()) > 0): ?>
    	<?php foreach ($this->getGalleryImages() as $_image): ?>
        <a href="#" data-image="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(56); ?>" 
           data-zoom-image="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'image', $_image->getFile()); ?>">
        	<img alt="" src="<?php echo $this->helper('catalog/image')->init($this->getProduct(), 'thumbnail', $_image->getFile())->resize(56); ?>" />
        </a>
    	<?php endforeach; ?>
   	<?php endif; ?>
</div>

<script type="text/javascript">

$j(function(){  
    $j('.imgPreview').elevateZoom({
    	gallery:'product-gallary',
    	zoomWindowWidth:589,
        zoomWindowHeight:383,
        borderSize:1,
        borderColour:'#AAAAAA',
        zoomWindowOffetx:16,
    	zoomWindowOffety:0
    }); 

    $j(".imgPreview").bind("click", function(e) {  
  	  var ez =   $j('.imgPreview').data('elevateZoom');
  	  ez.closeAll(); //NEW: This function force hides the lens, tint and window	
  		$j.fancybox(ez.getGalleryList());
  	  return false;
  	}); 
});  
</script>